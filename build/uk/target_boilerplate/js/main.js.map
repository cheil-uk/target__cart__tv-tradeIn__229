{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/main.js"],"names":[],"mappings":"AAAA;aCUA,IAAI,YAAc,gBAElB,YAAY,kBAAqB,WAIhC,IAAI,GAQH,KAAM,WACL,EAAK,uBAON,oBAAqB,WACpB,IAAI,EAAQ,KAEZ,QAAQ,IAAI,6BAEZ,WAAW,WACN,OAAO,GACV,QAAQ,IAAI,uCACZ,EAAK,UACL,EAAK,UACL,EAAK,wBACL,EAAK,mBAGL,QAAQ,IAAI,aACZ,EAAM,wBAEL,OAOJ,eAAgB,WAQf,IAKI,EAAQ,SAAS,MAAQ,SAAS,qBAAqB,QAAQ,GAClE,EAAS,SAAS,cAAc,SAEjC,EAAO,KAAO,WACV,EAAO,WACV,EAAO,WAAW,QAVR,UAYV,EAAO,YAAY,SAAS,eAZlB,YAcX,EAAM,YAAY,IASnB,QAAS,WAET,QAAQ,IAAI,mBACV,IAGM,GACN,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAExI,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAEpV,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAExI,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,kBAVxM,SAAS,iBAAiB,wBAgBnC,QAAQ,SAAC,GAClB,IAAM,EAAmB,EAAY,cAAc,kCAC7C,EAAmB,EAAY,cAAc,cAAc,wBAC3D,EAAiB,EAAY,cAAc,cAAc,mBAAmB,UAC9E,EAAc,EAAiB,cAAc,uBAC7C,EAAiB,EAAiB,cAAc,kCAGpD,IAAK,IAAM,KAAQ,EAAiB,CAChC,GAAI,OAAO,eAAe,KAAK,EAAiB,GAE5C,GAAK,IADmB,EAAgB,GAEpC,GAAyB,OAArB,EACA,EAAY,MAAM,QAAU,WACzB,CACH,IAAM,EAAY,SAAS,cAAc,KACzC,EAAU,UAnBF,iVAoBR,EAAU,MAAM,QAAhB,sYAOA,EAAY,UAAY,WACxB,EAAe,UAAY,uDAC3B,EAAiB,OAAO,QAe7C,UAAW,WAAoB,IAAV,EAAU,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAJ,GAE1B,QAAQ,IAAI,oBAAsB,IAgBnC,aAAc,WAEb,WAAW,WACV,EAAE,QAAQ,SACV,QAAQ,IAAI,mBACV,MAGJ,QAAS,WAOR,SAAS,EAAQ,GACb,EAAE,cAAgB,gBAClB,EAAE,gBAAkB,eACpB,EAAE,OAAS,eACX,EAAE,OAAS,EACX,EAAE,GAAG,KAAM,KAGf,IAAM,EAAc,SAAS,cAAc,wBAd3C,SAAoB,EAAI,GACpB,IAAI,IAAI,KAAO,EACf,EAAG,aAAa,EAAK,EAAM,IAa/B,CAAW,GACV,iBAAoB,YACpB,YAAA,yBAA6C,EAAY,UACzD,QAAoB,iBACpB,QAAoB,iBAGrB,EAAY,QAAU,WACpB,EAAQ,EAAY,aAAa,gBAIpC,sBAAuB,WACA,SAAS,iBAAiB,wBAClC,QAAQ,SAAC,GACrB,IAEQ,EAFiB,EAAY,cAAc,cAAc,wBAqB9C,IAAI,iBAbJ,SAAS,EAAe,GAAU,IAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IAE/C,IAAA,IAAA,EAAA,EAAsB,EAAtB,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,MAAA,GAAA,EAAqC,CAAA,IAA3B,EAA2B,EAAA,MACX,cAAlB,EAAS,KACT,EAAS,OAAO,cAAc,MAAM,QAAU,OAEvB,eAAlB,EAAS,MACd,QAAQ,IAAI,6BAP2B,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,KAAA,GAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,MAgB1C,QAAQ,GAnBA,YAAY,EAAM,WAAW,EAAM,SAAS,QA6BnE,OACC,KAAM,GAnOyB,GAwOjC,YAAY,kBAAkB,KAAK","file":"main.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// ==========================================================================\n//  This is a boilerplate to use for target activities\n//\n//\tURL example: add in url of project for visibility here\n// ==========================================================================\n\n// ==========================================================================\n// Scripts, helper widgets - import below\n// ==========================================================================\n\nvar cheillondon = cheillondon || {};\n\ncheillondon.targetBoilerplate = (function () {\n\n\t'use strict';\n\n\tvar main = {\n\n\t\t// ==========================================================================\n\t\t// Variables and config Properties add below\n\t\t// ==========================================================================\n\n\n\t\t//Init\n\t\tinit: function () {\n\t\t\tmain.doEverythingTimeout();\n\t\t},\n\n\n\t\t// ==========================================================================\n\t\t// Checking jQuery\n\t\t// ==========================================================================\n\t\tdoEverythingTimeout: function () {\n\t\t\tvar _self = this;\n\n\t\t\tconsole.log('XXX - doEverythingTimeout');\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tif (window.$) {\n\t\t\t\t\tconsole.log('doEverythingTimeout - jQuery loaded');\n\t\t\t\t\tmain.kickoff();\n\t\t\t\t\tmain.tagging();\n\t\t\t\t\tmain.trackElementMutations();\n\t\t\t\t\tmain.appendNewStyle();\n\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('no jquery')\n\t\t\t\t\t_self.doEverythingTimeout();\n\t\t\t\t}\n\t\t\t}, 1500)\n\t\t},\n\n\n\t\t// ==========================================================================\n\t\t// Adding style\n\t\t// ==========================================================================\n\t\tappendNewStyle: function () {\n\n\t\t\t/* FYI: the CSS code is in separated file, in SCSS format that generates the CSS file. After, the gulp file finds the [CSS] and replaces with minified code from file */\n\n\t\t\t//To insert minified inline string uncomment this variable and paste here\n\t\t\t//Else, use default uncommented variable\n\t\t\t// var _css = '';\n\n\t\t\tvar _css = '[[CSS]]';\n\n\t\t\t//\n\t\t\t// Adding style definitions to DOM\n\t\t\t// --------------------------------------------------------------------------\n\t\t\tvar _head = document.head || document.getElementsByTagName('head')[0],\n\t\t\t\t_style = document.createElement('style');\n\n\t\t\t_style.type = 'text/css';\n\t\t\tif (_style.styleSheet) { // This is required for IE8 and below.\n\t\t\t\t_style.styleSheet.cssText = _css;\n\t\t\t} else {\n\t\t\t\t_style.appendChild(document.createTextNode(_css));\n\t\t\t}\n\t\t\t_head.appendChild(_style);\n\n\t\t},\n\n\n\n\t\t// ==========================================================================\n\t\t// When page is already loaded we need to add the new elements\n\t\t// ==========================================================================\n\t\tkickoff: function () {\n\n\t\tconsole.log('we have kickoff') // this is purely for testing\n    const cartWrappers = document.querySelectorAll('.cart-item__services');\n\n\n    const spreadsheetSkus = [\n    \"QE85QN900ATXXU\",\"QE75QN900ATXXU\",\"QE65QN900ATXXU\",\"QE85QN800ATXXU\",\"QE75QN800ATXXU\",\"QE65QN800ATXXU\",\"QE75QN700ATXXU\",\"QE65QN700ATXXU\",\"QE55QN700ATXXU\",\n\n    \"QE85QN95AATXXU\",\"QE75QN95AATXXU\",\"QE65QN95AATXXU\",\"QE55QN95AATXXU\",\"QE85QN94CATXXU\",\"QE75QN94AATXXU\",\"QE65QN94AATXXU\",\"QE55QN94AATXXU\",\"QE50QN94AATXXU\",\"QE43QN94AATXXU\",\"QE98QN90AATXXU\",\"QE85QN90AATXXU\",\"QE75QN90AATXXU\",\"QE65QN90AATXXU\",\"QE55QN90AATXXU\",\"QE50QN90AATXXU\",\"QE43QN90AATXXU\",\"QE85QN85AATXXU\",\"QE75QN85AATXXU\",\"QE65QN85AATXXU\",\"QE55QN85AATXXU\",\n\n    \"QE85QN900BTXXU\",\"QE75QN900BTXXU\",\"QE65QN900BTXXU\",\"QE85QN800BTXXU\",\"QE75QN800BTXXU\",\"QE65QN800BTXXU\",\"QE75QN700BTXXU\",\"QE65QN700BTXXU\",\"QE55QN700BTXXU\",\n\n    \"QE85QN95BATXXU\",\"QE75QN95BATXXU\",\"QE65QN95BATXXU\",\"QE55QN95BATXXU\",\"QE85QN90BATXXU\",\"QE75QN90BATXXU\",\"QE65QN90BATXXU\",\"QE55QN90BATXXU\",\"QE50QN90BATXXU\",\"QE43QN90BATXXU\",\"QE85QN85BATXXU\",\"QE75QN85BATXXU\",\"QE65QN85BATXXU\",\"QE55QN85BATXXU\"\n    ];\n\n    const termsandconditions = \"Please note: The discount you receive is an incentive to recycle and to purchase a new Samsung television; it is not a trade-in value for the recycled TV. Recycled TVs are non-returnable and have a zero value. If you return your purchased TV for a refund (for any reason) you will not receive any amount or value for your recycled TV.\"\n\n\n\t\t\tcartWrappers.forEach((cartWrapper) => { // Loop through each cartWrapper\n\t\t\t\t\t\t\tconst wrapperMessaging = cartWrapper.querySelector('.service-item__applied-message');\n\t\t\t\t\t\t\tconst tradeInContainer = cartWrapper.parentElement.querySelector('.cart-item__services');\n\t\t\t\t\t\t\tconst currentCartSku = cartWrapper.parentElement.querySelector('.cart-item__sku').innerText;\n\t\t\t\t\t\t\tlet tradeInName = tradeInContainer.querySelector('.service-item__name')\n\t\t\t\t\t\t\tlet tradeInMessage = tradeInContainer.querySelector('.service-item__applied-message')\n\t\t\t\t\t\t\t// console.log(tradeInName, tradeInMessage);\n\n\t\t\t\t\t\t\tfor (const skus in spreadsheetSkus) { // Loop through each sku\n\t\t\t\t\t\t\t\t\t\t\tif (Object.hasOwnProperty.call(spreadsheetSkus, skus)) { // Check if sku is in spreadsheet aka the array above\n\t\t\t\t\t\t\t\t\t\t\tconst spreadsheetSkuValue = spreadsheetSkus[skus];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( currentCartSku === spreadsheetSkuValue ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (wrapperMessaging === null ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcartWrapper.style.display = 'none'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst paragraph = document.createElement('p');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparagraph.innerText = termsandconditions;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparagraph.style.cssText = `\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfont-style: italic;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpadding-top: 5px;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfont-family: 'SamsungOne700';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttradeInName.innerText = \"Trade Up\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttradeInMessage.innerText = \"Your trade-up discount has been successfully applied\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twrapperMessaging.append(paragraph);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t});\n\n\n\n\t\t},\n\n\n\t\t// ==========================================================================\n\t\t// Set Events\n\t\t// ==========================================================================\n\t\tsetEvents: function (elm = '') {\n\n\t\t\tconsole.log('XXX - setEvents: ' + elm);\n\n\t\t\tswitch (elm) {\n\t\t\t\tcase 'modal':\n\t\t\t\t\t//code to open modal;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'financePopup':\n\t\t\t\t//code to open something else;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\n\n\t\t},\n\n\t\tresizeWindow: function () {\n\t\t\t// as new elements added to panel we need to resize window to activate amend height of Product Panels\n\t\t\tsetTimeout(function () {\n\t\t\t\t$(window).resize();\n\t\t\t\tconsole.log('window resized');\n\t\t\t}, 100);\n\t\t},\n\n\t\ttagging: function () {\n\t\t\tfunction addTagging(el, attrs) {\n\t\t\t\t\t\t\tfor(let key in attrs) {\n\t\t\t\t\t\t\tel.setAttribute(key, attrs[key]);\n\t\t\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction tagging(data) {\n\t\t\t\t\t\t\ts.linkTrackVars = \"eVar41,events\";\n\t\t\t\t\t\t\ts.linkTrackEvents = \"scAdd,scView\";\n\t\t\t\t\t\t\ts.events = \"scAdd,scView\";\n\t\t\t\t\t\t\ts.eVar41 = data;\n\t\t\t\t\t\t\ts.tl(this, 'o');\n\t\t\t};\n\n\t\t\tconst continueBtn = document.querySelector(\".order-summary__btn\")\n\t\t\taddTagging(continueBtn,{\n\t\t\t\t\"data-omni-type\"  : \"microsite\",\n\t\t\t\t\"data-omni\"       : `uk:228:cart:tvtradeup:${continueBtn.innerText}`,\n\t\t\t\t\"ga-ac\"           : \"pd buying tool\",\n\t\t\t\t\"ga-ca\"           : \"option input\"\n\t\t\t})\n\n\t\t\tcontinueBtn.onclick = () => {\n\t\t\t\t\ttagging(continueBtn.getAttribute('data-omni'));\n\t\t\t\t}\n\t\t},\n\n\t\ttrackElementMutations: function () {\n\t\t\t const cartWrappers = document.querySelectorAll('.cart-item__services');\n\t\t\t\tcartWrappers.forEach((cartWrapper) => {\n\t\t\t\t\tconst tradeInContainer = cartWrapper.parentElement.querySelector('.cart-item__services');\n\t\t\t\t\t// Select the node that will be observed for mutations\n\t\t\t\t\t\t\tconst targetNode = tradeInContainer\n\n\t\t\t\t\t\t\t// Options for the observer (which mutations to observe)\n\t\t\t\t\t\t\tconst config = { attributes: true, childList: true, subtree: true };\n\n\t\t\t\t\t\t\t// Callback function to execute when mutations are observed\n\t\t\t\t\t\t\tconst callback = function(mutationsList, observer) {\n\t\t\t\t\t\t\t\t\t\t\t// Use traditional 'for loops' for IE 11\n\t\t\t\t\t\t\t\t\t\t\tfor(const mutation of mutationsList) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (mutation.type === 'childList') {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmutation.target.parentElement.style.display = 'none'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\telse if (mutation.type === 'attributes') {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('And element was modified');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t// Create an observer instance linked to the callback function\n\t\t\t\t\t\t\tconst observer = new MutationObserver(callback);\n\n\t\t\t\t\t\t\t// Start observing the target node for configured mutations\n\t\t\t\t\t\t\tobserver.observe(targetNode, config);\n\n\t\t\t\t\t\t\t// Later, you can stop observing\n\t\t\t\t\t\t\t// observer.disconnect();\n\t\t\t\t});\n\n\t\t},\n\n\n\t};\n\treturn {\n\t\tmain: main\n\t};\n\n})();\n\ncheillondon.targetBoilerplate.main.init();\n\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvbWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTthQ1VBLElBQUksWUFBYyxnQkFFbEIsWUFBWSxrQkFBcUIsV0FJaEMsSUFBSSxHQVFILEtBQU0sV0FDTCxFQUFLLHVCQU9OLG9CQUFxQixXQUNwQixJQUFJLEVBQVEsS0FFWixRQUFRLElBQUksNkJBRVosV0FBVyxXQUNOLE9BQU8sR0FDVixRQUFRLElBQUksdUNBQ1osRUFBSyxVQUNMLEVBQUssVUFDTCxFQUFLLHdCQUNMLEVBQUssbUJBR0wsUUFBUSxJQUFJLGFBQ1osRUFBTSx3QkFFTCxPQU9KLGVBQWdCLFdBUWYsSUFLSSxFQUFRLFNBQVMsTUFBUSxTQUFTLHFCQUFxQixRQUFRLEdBQ2xFLEVBQVMsU0FBUyxjQUFjLFNBRWpDLEVBQU8sS0FBTyxXQUNWLEVBQU8sV0FDVixFQUFPLFdBQVcsUUFWUixVQVlWLEVBQU8sWUFBWSxTQUFTLGVBWmxCLFlBY1gsRUFBTSxZQUFZLElBU25CLFFBQVMsV0FFVCxRQUFRLElBQUksbUJBQ1YsSUFHTSxHQUNOLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBRXhJLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBRXBWLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBRXhJLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixrQkFWeE0sU0FBUyxpQkFBaUIsd0JBZ0JuQyxRQUFRLFNBQUMsR0FDbEIsSUFBTSxFQUFtQixFQUFZLGNBQWMsa0NBQzdDLEVBQW1CLEVBQVksY0FBYyxjQUFjLHdCQUMzRCxFQUFpQixFQUFZLGNBQWMsY0FBYyxtQkFBbUIsVUFDOUUsRUFBYyxFQUFpQixjQUFjLHVCQUM3QyxFQUFpQixFQUFpQixjQUFjLGtDQUdwRCxJQUFLLElBQU0sS0FBUSxFQUFpQixDQUNoQyxHQUFJLE9BQU8sZUFBZSxLQUFLLEVBQWlCLEdBRTVDLEdBQUssSUFEbUIsRUFBZ0IsR0FFcEMsR0FBeUIsT0FBckIsRUFDQSxFQUFZLE1BQU0sUUFBVSxXQUN6QixDQUNILElBQU0sRUFBWSxTQUFTLGNBQWMsS0FDekMsRUFBVSxVQW5CRixpVkFvQlIsRUFBVSxNQUFNLFFBQWhCLHNZQU9BLEVBQVksVUFBWSxXQUN4QixFQUFlLFVBQVksdURBQzNCLEVBQWlCLE9BQU8sUUFlN0MsVUFBVyxXQUFvQixJQUFWLEVBQVUsVUFBQSxPQUFBLFFBQUEsSUFBQSxVQUFBLEdBQUEsVUFBQSxHQUFKLEdBRTFCLFFBQVEsSUFBSSxvQkFBc0IsSUFnQm5DLGFBQWMsV0FFYixXQUFXLFdBQ1YsRUFBRSxRQUFRLFNBQ1YsUUFBUSxJQUFJLG1CQUNWLE1BR0osUUFBUyxXQU9SLFNBQVMsRUFBUSxHQUNiLEVBQUUsY0FBZ0IsZ0JBQ2xCLEVBQUUsZ0JBQWtCLGVBQ3BCLEVBQUUsT0FBUyxlQUNYLEVBQUUsT0FBUyxFQUNYLEVBQUUsR0FBRyxLQUFNLEtBR2YsSUFBTSxFQUFjLFNBQVMsY0FBYyx3QkFkM0MsU0FBb0IsRUFBSSxHQUNwQixJQUFJLElBQUksS0FBTyxFQUNmLEVBQUcsYUFBYSxFQUFLLEVBQU0sSUFhL0IsQ0FBVyxHQUNWLGlCQUFvQixZQUNwQixZQUFBLHlCQUE2QyxFQUFZLFVBQ3pELFFBQW9CLGlCQUNwQixRQUFvQixpQkFHckIsRUFBWSxRQUFVLFdBQ3BCLEVBQVEsRUFBWSxhQUFhLGdCQUlwQyxzQkFBdUIsV0FDQSxTQUFTLGlCQUFpQix3QkFDbEMsUUFBUSxTQUFDLEdBQ3JCLElBRVEsRUFGaUIsRUFBWSxjQUFjLGNBQWMsd0JBcUI5QyxJQUFJLGlCQWJKLFNBQVMsRUFBZSxHQUFVLElBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsSUFFL0MsSUFBQSxJQUFBLEVBQUEsRUFBc0IsRUFBdEIsT0FBQSxjQUFBLEdBQUEsRUFBQSxFQUFBLFFBQUEsTUFBQSxHQUFBLEVBQXFDLENBQUEsSUFBM0IsRUFBMkIsRUFBQSxNQUNYLGNBQWxCLEVBQVMsS0FDVCxFQUFTLE9BQU8sY0FBYyxNQUFNLFFBQVUsT0FFdkIsZUFBbEIsRUFBUyxNQUNkLFFBQVEsSUFBSSw2QkFQMkIsTUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsUUFBQSxLQUFBLEdBQUEsRUFBQSxRQUFBLEVBQUEsU0FBQSxRQUFBLEdBQUEsRUFBQSxNQUFBLE1BZ0IxQyxRQUFRLEdBbkJBLFlBQVksRUFBTSxXQUFXLEVBQU0sU0FBUyxRQTZCbkUsT0FDQyxLQUFNLEdBbk95QixHQXdPakMsWUFBWSxrQkFBa0IsS0FBSyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyAgVGhpcyBpcyBhIGJvaWxlcnBsYXRlIHRvIHVzZSBmb3IgdGFyZ2V0IGFjdGl2aXRpZXNcbi8vXG4vL1x0VVJMIGV4YW1wbGU6IGFkZCBpbiB1cmwgb2YgcHJvamVjdCBmb3IgdmlzaWJpbGl0eSBoZXJlXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU2NyaXB0cywgaGVscGVyIHdpZGdldHMgLSBpbXBvcnQgYmVsb3dcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbnZhciBjaGVpbGxvbmRvbiA9IGNoZWlsbG9uZG9uIHx8IHt9O1xuXG5jaGVpbGxvbmRvbi50YXJnZXRCb2lsZXJwbGF0ZSA9IChmdW5jdGlvbiAoKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBtYWluID0ge1xuXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQvLyBWYXJpYWJsZXMgYW5kIGNvbmZpZyBQcm9wZXJ0aWVzIGFkZCBiZWxvd1xuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuXHRcdC8vSW5pdFxuXHRcdGluaXQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdG1haW4uZG9FdmVyeXRoaW5nVGltZW91dCgpO1xuXHRcdH0sXG5cblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gQ2hlY2tpbmcgalF1ZXJ5XG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHRkb0V2ZXJ5dGhpbmdUaW1lb3V0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgX3NlbGYgPSB0aGlzO1xuXG5cdFx0XHRjb25zb2xlLmxvZygnWFhYIC0gZG9FdmVyeXRoaW5nVGltZW91dCcpO1xuXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aWYgKHdpbmRvdy4kKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ2RvRXZlcnl0aGluZ1RpbWVvdXQgLSBqUXVlcnkgbG9hZGVkJyk7XG5cdFx0XHRcdFx0bWFpbi5raWNrb2ZmKCk7XG5cdFx0XHRcdFx0bWFpbi50YWdnaW5nKCk7XG5cdFx0XHRcdFx0bWFpbi50cmFja0VsZW1lbnRNdXRhdGlvbnMoKTtcblx0XHRcdFx0XHRtYWluLmFwcGVuZE5ld1N0eWxlKCk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnbm8ganF1ZXJ5Jylcblx0XHRcdFx0XHRfc2VsZi5kb0V2ZXJ5dGhpbmdUaW1lb3V0KCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIDE1MDApXG5cdFx0fSxcblxuXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQvLyBBZGRpbmcgc3R5bGVcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdGFwcGVuZE5ld1N0eWxlOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdC8qIEZZSTogdGhlIENTUyBjb2RlIGlzIGluIHNlcGFyYXRlZCBmaWxlLCBpbiBTQ1NTIGZvcm1hdCB0aGF0IGdlbmVyYXRlcyB0aGUgQ1NTIGZpbGUuIEFmdGVyLCB0aGUgZ3VscCBmaWxlIGZpbmRzIHRoZSBbQ1NTXSBhbmQgcmVwbGFjZXMgd2l0aCBtaW5pZmllZCBjb2RlIGZyb20gZmlsZSAqL1xuXG5cdFx0XHQvL1RvIGluc2VydCBtaW5pZmllZCBpbmxpbmUgc3RyaW5nIHVuY29tbWVudCB0aGlzIHZhcmlhYmxlIGFuZCBwYXN0ZSBoZXJlXG5cdFx0XHQvL0Vsc2UsIHVzZSBkZWZhdWx0IHVuY29tbWVudGVkIHZhcmlhYmxlXG5cdFx0XHQvLyB2YXIgX2NzcyA9ICcnO1xuXG5cdFx0XHR2YXIgX2NzcyA9ICdbW0NTU11dJztcblxuXHRcdFx0Ly9cblx0XHRcdC8vIEFkZGluZyBzdHlsZSBkZWZpbml0aW9ucyB0byBET01cblx0XHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHR2YXIgX2hlYWQgPSBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0sXG5cdFx0XHRcdF9zdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cblx0XHRcdF9zdHlsZS50eXBlID0gJ3RleHQvY3NzJztcblx0XHRcdGlmIChfc3R5bGUuc3R5bGVTaGVldCkgeyAvLyBUaGlzIGlzIHJlcXVpcmVkIGZvciBJRTggYW5kIGJlbG93LlxuXHRcdFx0XHRfc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gX2Nzcztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdF9zdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShfY3NzKSk7XG5cdFx0XHR9XG5cdFx0XHRfaGVhZC5hcHBlbmRDaGlsZChfc3R5bGUpO1xuXG5cdFx0fSxcblxuXG5cblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdC8vIFdoZW4gcGFnZSBpcyBhbHJlYWR5IGxvYWRlZCB3ZSBuZWVkIHRvIGFkZCB0aGUgbmV3IGVsZW1lbnRzXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHRraWNrb2ZmOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRjb25zb2xlLmxvZygnd2UgaGF2ZSBraWNrb2ZmJykgLy8gdGhpcyBpcyBwdXJlbHkgZm9yIHRlc3RpbmdcbiAgICBjb25zdCBjYXJ0V3JhcHBlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FydC1pdGVtX19zZXJ2aWNlcycpO1xuXG5cbiAgICBjb25zdCBzcHJlYWRzaGVldFNrdXMgPSBbXG4gICAgXCJRRTg1UU45MDBBVFhYVVwiLFwiUUU3NVFOOTAwQVRYWFVcIixcIlFFNjVRTjkwMEFUWFhVXCIsXCJRRTg1UU44MDBBVFhYVVwiLFwiUUU3NVFOODAwQVRYWFVcIixcIlFFNjVRTjgwMEFUWFhVXCIsXCJRRTc1UU43MDBBVFhYVVwiLFwiUUU2NVFONzAwQVRYWFVcIixcIlFFNTVRTjcwMEFUWFhVXCIsXG5cbiAgICBcIlFFODVRTjk1QUFUWFhVXCIsXCJRRTc1UU45NUFBVFhYVVwiLFwiUUU2NVFOOTVBQVRYWFVcIixcIlFFNTVRTjk1QUFUWFhVXCIsXCJRRTg1UU45NENBVFhYVVwiLFwiUUU3NVFOOTRBQVRYWFVcIixcIlFFNjVRTjk0QUFUWFhVXCIsXCJRRTU1UU45NEFBVFhYVVwiLFwiUUU1MFFOOTRBQVRYWFVcIixcIlFFNDNRTjk0QUFUWFhVXCIsXCJRRTk4UU45MEFBVFhYVVwiLFwiUUU4NVFOOTBBQVRYWFVcIixcIlFFNzVRTjkwQUFUWFhVXCIsXCJRRTY1UU45MEFBVFhYVVwiLFwiUUU1NVFOOTBBQVRYWFVcIixcIlFFNTBRTjkwQUFUWFhVXCIsXCJRRTQzUU45MEFBVFhYVVwiLFwiUUU4NVFOODVBQVRYWFVcIixcIlFFNzVRTjg1QUFUWFhVXCIsXCJRRTY1UU44NUFBVFhYVVwiLFwiUUU1NVFOODVBQVRYWFVcIixcblxuICAgIFwiUUU4NVFOOTAwQlRYWFVcIixcIlFFNzVRTjkwMEJUWFhVXCIsXCJRRTY1UU45MDBCVFhYVVwiLFwiUUU4NVFOODAwQlRYWFVcIixcIlFFNzVRTjgwMEJUWFhVXCIsXCJRRTY1UU44MDBCVFhYVVwiLFwiUUU3NVFONzAwQlRYWFVcIixcIlFFNjVRTjcwMEJUWFhVXCIsXCJRRTU1UU43MDBCVFhYVVwiLFxuXG4gICAgXCJRRTg1UU45NUJBVFhYVVwiLFwiUUU3NVFOOTVCQVRYWFVcIixcIlFFNjVRTjk1QkFUWFhVXCIsXCJRRTU1UU45NUJBVFhYVVwiLFwiUUU4NVFOOTBCQVRYWFVcIixcIlFFNzVRTjkwQkFUWFhVXCIsXCJRRTY1UU45MEJBVFhYVVwiLFwiUUU1NVFOOTBCQVRYWFVcIixcIlFFNTBRTjkwQkFUWFhVXCIsXCJRRTQzUU45MEJBVFhYVVwiLFwiUUU4NVFOODVCQVRYWFVcIixcIlFFNzVRTjg1QkFUWFhVXCIsXCJRRTY1UU44NUJBVFhYVVwiLFwiUUU1NVFOODVCQVRYWFVcIlxuICAgIF07XG5cbiAgICBjb25zdCB0ZXJtc2FuZGNvbmRpdGlvbnMgPSBcIlBsZWFzZSBub3RlOiBUaGUgZGlzY291bnQgeW91IHJlY2VpdmUgaXMgYW4gaW5jZW50aXZlIHRvIHJlY3ljbGUgYW5kIHRvIHB1cmNoYXNlIGEgbmV3IFNhbXN1bmcgdGVsZXZpc2lvbjsgaXQgaXMgbm90IGEgdHJhZGUtaW4gdmFsdWUgZm9yIHRoZSByZWN5Y2xlZCBUVi4gUmVjeWNsZWQgVFZzIGFyZSBub24tcmV0dXJuYWJsZSBhbmQgaGF2ZSBhIHplcm8gdmFsdWUuIElmIHlvdSByZXR1cm4geW91ciBwdXJjaGFzZWQgVFYgZm9yIGEgcmVmdW5kIChmb3IgYW55IHJlYXNvbikgeW91IHdpbGwgbm90IHJlY2VpdmUgYW55IGFtb3VudCBvciB2YWx1ZSBmb3IgeW91ciByZWN5Y2xlZCBUVi5cIlxuXG5cblx0XHRcdGNhcnRXcmFwcGVycy5mb3JFYWNoKChjYXJ0V3JhcHBlcikgPT4geyAvLyBMb29wIHRocm91Z2ggZWFjaCBjYXJ0V3JhcHBlclxuXHRcdFx0XHRcdFx0XHRjb25zdCB3cmFwcGVyTWVzc2FnaW5nID0gY2FydFdyYXBwZXIucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtaXRlbV9fYXBwbGllZC1tZXNzYWdlJyk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHRyYWRlSW5Db250YWluZXIgPSBjYXJ0V3JhcHBlci5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJ0LWl0ZW1fX3NlcnZpY2VzJyk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRDYXJ0U2t1ID0gY2FydFdyYXBwZXIucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FydC1pdGVtX19za3UnKS5pbm5lclRleHQ7XG5cdFx0XHRcdFx0XHRcdGxldCB0cmFkZUluTmFtZSA9IHRyYWRlSW5Db250YWluZXIucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtaXRlbV9fbmFtZScpXG5cdFx0XHRcdFx0XHRcdGxldCB0cmFkZUluTWVzc2FnZSA9IHRyYWRlSW5Db250YWluZXIucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtaXRlbV9fYXBwbGllZC1tZXNzYWdlJylcblx0XHRcdFx0XHRcdFx0Ly8gY29uc29sZS5sb2codHJhZGVJbk5hbWUsIHRyYWRlSW5NZXNzYWdlKTtcblxuXHRcdFx0XHRcdFx0XHRmb3IgKGNvbnN0IHNrdXMgaW4gc3ByZWFkc2hlZXRTa3VzKSB7IC8vIExvb3AgdGhyb3VnaCBlYWNoIHNrdVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChzcHJlYWRzaGVldFNrdXMsIHNrdXMpKSB7IC8vIENoZWNrIGlmIHNrdSBpcyBpbiBzcHJlYWRzaGVldCBha2EgdGhlIGFycmF5IGFib3ZlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc3ByZWFkc2hlZXRTa3VWYWx1ZSA9IHNwcmVhZHNoZWV0U2t1c1tza3VzXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggY3VycmVudENhcnRTa3UgPT09IHNwcmVhZHNoZWV0U2t1VmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh3cmFwcGVyTWVzc2FnaW5nID09PSBudWxsICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNhcnRXcmFwcGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBwYXJhZ3JhcGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cGFyYWdyYXBoLmlubmVyVGV4dCA9IHRlcm1zYW5kY29uZGl0aW9ucztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwYXJhZ3JhcGguc3R5bGUuY3NzVGV4dCA9IGBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmb250LXNpemU6IDEycHg7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9udC1zdHlsZTogaXRhbGljO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHBhZGRpbmctdG9wOiA1cHg7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9udC13ZWlnaHQ6IGJvbGQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9udC1mYW1pbHk6ICdTYW1zdW5nT25lNzAwJztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHJhZGVJbk5hbWUuaW5uZXJUZXh0ID0gXCJUcmFkZSBVcFwiXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHJhZGVJbk1lc3NhZ2UuaW5uZXJUZXh0ID0gXCJZb3VyIHRyYWRlLXVwIGRpc2NvdW50IGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBhcHBsaWVkXCJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR3cmFwcGVyTWVzc2FnaW5nLmFwcGVuZChwYXJhZ3JhcGgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXG5cblx0XHR9LFxuXG5cblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdC8vIFNldCBFdmVudHNcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdHNldEV2ZW50czogZnVuY3Rpb24gKGVsbSA9ICcnKSB7XG5cblx0XHRcdGNvbnNvbGUubG9nKCdYWFggLSBzZXRFdmVudHM6ICcgKyBlbG0pO1xuXG5cdFx0XHRzd2l0Y2ggKGVsbSkge1xuXHRcdFx0XHRjYXNlICdtb2RhbCc6XG5cdFx0XHRcdFx0Ly9jb2RlIHRvIG9wZW4gbW9kYWw7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ2ZpbmFuY2VQb3B1cCc6XG5cdFx0XHRcdC8vY29kZSB0byBvcGVuIHNvbWV0aGluZyBlbHNlO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXG5cblxuXHRcdH0sXG5cblx0XHRyZXNpemVXaW5kb3c6IGZ1bmN0aW9uICgpIHtcblx0XHRcdC8vIGFzIG5ldyBlbGVtZW50cyBhZGRlZCB0byBwYW5lbCB3ZSBuZWVkIHRvIHJlc2l6ZSB3aW5kb3cgdG8gYWN0aXZhdGUgYW1lbmQgaGVpZ2h0IG9mIFByb2R1Y3QgUGFuZWxzXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JCh3aW5kb3cpLnJlc2l6ZSgpO1xuXHRcdFx0XHRjb25zb2xlLmxvZygnd2luZG93IHJlc2l6ZWQnKTtcblx0XHRcdH0sIDEwMCk7XG5cdFx0fSxcblxuXHRcdHRhZ2dpbmc6IGZ1bmN0aW9uICgpIHtcblx0XHRcdGZ1bmN0aW9uIGFkZFRhZ2dpbmcoZWwsIGF0dHJzKSB7XG5cdFx0XHRcdFx0XHRcdGZvcihsZXQga2V5IGluIGF0dHJzKSB7XG5cdFx0XHRcdFx0XHRcdGVsLnNldEF0dHJpYnV0ZShrZXksIGF0dHJzW2tleV0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIHRhZ2dpbmcoZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRzLmxpbmtUcmFja1ZhcnMgPSBcImVWYXI0MSxldmVudHNcIjtcblx0XHRcdFx0XHRcdFx0cy5saW5rVHJhY2tFdmVudHMgPSBcInNjQWRkLHNjVmlld1wiO1xuXHRcdFx0XHRcdFx0XHRzLmV2ZW50cyA9IFwic2NBZGQsc2NWaWV3XCI7XG5cdFx0XHRcdFx0XHRcdHMuZVZhcjQxID0gZGF0YTtcblx0XHRcdFx0XHRcdFx0cy50bCh0aGlzLCAnbycpO1xuXHRcdFx0fTtcblxuXHRcdFx0Y29uc3QgY29udGludWVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm9yZGVyLXN1bW1hcnlfX2J0blwiKVxuXHRcdFx0YWRkVGFnZ2luZyhjb250aW51ZUJ0bix7XG5cdFx0XHRcdFwiZGF0YS1vbW5pLXR5cGVcIiAgOiBcIm1pY3Jvc2l0ZVwiLFxuXHRcdFx0XHRcImRhdGEtb21uaVwiICAgICAgIDogYHVrOjIyODpjYXJ0OnR2dHJhZGV1cDoke2NvbnRpbnVlQnRuLmlubmVyVGV4dH1gLFxuXHRcdFx0XHRcImdhLWFjXCIgICAgICAgICAgIDogXCJwZCBidXlpbmcgdG9vbFwiLFxuXHRcdFx0XHRcImdhLWNhXCIgICAgICAgICAgIDogXCJvcHRpb24gaW5wdXRcIlxuXHRcdFx0fSlcblxuXHRcdFx0Y29udGludWVCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHR0YWdnaW5nKGNvbnRpbnVlQnRuLmdldEF0dHJpYnV0ZSgnZGF0YS1vbW5pJykpO1xuXHRcdFx0XHR9XG5cdFx0fSxcblxuXHRcdHRyYWNrRWxlbWVudE11dGF0aW9uczogZnVuY3Rpb24gKCkge1xuXHRcdFx0IGNvbnN0IGNhcnRXcmFwcGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJ0LWl0ZW1fX3NlcnZpY2VzJyk7XG5cdFx0XHRcdGNhcnRXcmFwcGVycy5mb3JFYWNoKChjYXJ0V3JhcHBlcikgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHRyYWRlSW5Db250YWluZXIgPSBjYXJ0V3JhcHBlci5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJ0LWl0ZW1fX3NlcnZpY2VzJyk7XG5cdFx0XHRcdFx0Ly8gU2VsZWN0IHRoZSBub2RlIHRoYXQgd2lsbCBiZSBvYnNlcnZlZCBmb3IgbXV0YXRpb25zXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHRhcmdldE5vZGUgPSB0cmFkZUluQ29udGFpbmVyXG5cblx0XHRcdFx0XHRcdFx0Ly8gT3B0aW9ucyBmb3IgdGhlIG9ic2VydmVyICh3aGljaCBtdXRhdGlvbnMgdG8gb2JzZXJ2ZSlcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29uZmlnID0geyBhdHRyaWJ1dGVzOiB0cnVlLCBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfTtcblxuXHRcdFx0XHRcdFx0XHQvLyBDYWxsYmFjayBmdW5jdGlvbiB0byBleGVjdXRlIHdoZW4gbXV0YXRpb25zIGFyZSBvYnNlcnZlZFxuXHRcdFx0XHRcdFx0XHRjb25zdCBjYWxsYmFjayA9IGZ1bmN0aW9uKG11dGF0aW9uc0xpc3QsIG9ic2VydmVyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVXNlIHRyYWRpdGlvbmFsICdmb3IgbG9vcHMnIGZvciBJRSAxMVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZvcihjb25zdCBtdXRhdGlvbiBvZiBtdXRhdGlvbnNMaXN0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAobXV0YXRpb24udHlwZSA9PT0gJ2NoaWxkTGlzdCcpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0bXV0YXRpb24udGFyZ2V0LnBhcmVudEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAobXV0YXRpb24udHlwZSA9PT0gJ2F0dHJpYnV0ZXMnKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdBbmQgZWxlbWVudCB3YXMgbW9kaWZpZWQnKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIGFuIG9ic2VydmVyIGluc3RhbmNlIGxpbmtlZCB0byB0aGUgY2FsbGJhY2sgZnVuY3Rpb25cblx0XHRcdFx0XHRcdFx0Y29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihjYWxsYmFjayk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gU3RhcnQgb2JzZXJ2aW5nIHRoZSB0YXJnZXQgbm9kZSBmb3IgY29uZmlndXJlZCBtdXRhdGlvbnNcblx0XHRcdFx0XHRcdFx0b2JzZXJ2ZXIub2JzZXJ2ZSh0YXJnZXROb2RlLCBjb25maWcpO1xuXG5cdFx0XHRcdFx0XHRcdC8vIExhdGVyLCB5b3UgY2FuIHN0b3Agb2JzZXJ2aW5nXG5cdFx0XHRcdFx0XHRcdC8vIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0XHRcdFx0fSk7XG5cblx0XHR9LFxuXG5cblx0fTtcblx0cmV0dXJuIHtcblx0XHRtYWluOiBtYWluXG5cdH07XG5cbn0pKCk7XG5cbmNoZWlsbG9uZG9uLnRhcmdldEJvaWxlcnBsYXRlLm1haW4uaW5pdCgpO1xuXG4iXX0="}